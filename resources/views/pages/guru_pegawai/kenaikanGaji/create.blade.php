@extends('templates.dashboard')

@section('title')
Upload
@endsection

@section('content')


<div class="row">

    <!-- Team item -->

    <div class="col-xl-5">
        <table class="table">
            <tbody>
                <tr>
                    <th scope="row" width="40%">Nama : </th>
                    <td>Amirul Hidayah</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">NIP : </th>
                    <td>16081999</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">NUPTK : </th>
                    <td>16081999</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">Unit Kerja : </th>
                    <td>SMP Negeri 1 Parigi</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">Gaji Terakhir : </th>
                    <td>4.000.000</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">Lama Kerja : </th>
                    <td>4 Tahun 3 Bulan</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">TMT Gaji Berkala : </th>
                    <td>16-08-2018</td>
                </tr>
                <tr>
                    <th scope="row" width="40%">Berkas Dasar : </th>
                    <td scope="row"></td>
                </tr>
            </tbody>
        </table>
        <div class="col-lg-12">
            <div class="row">
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                Kartu Pegawai
                            </span>
                        </div>
                    </a>
                </div>
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                Kartu Tanda Penduduk
                            </span>
                        </div>
                    </a>
                </div>

            </div>
            <div class="row mt-3">
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                Kartu Keluarga
                            </span>
                        </div>
                    </a>
                </div>
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                Ijazah Terakhir
                            </span>
                        </div>
                    </a>
                </div>

            </div>
            <div class="row mt-3">
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                SK CPNS
                            </span>
                        </div>
                    </a>
                </div>
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                SK PNS
                            </span>
                        </div>
                    </a>
                </div>

            </div>
            <div class="row mt-3">
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                SK Kenaikan Gaji Berkala
                            </span>
                        </div>
                    </a>
                </div>
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                SPMT
                            </span>
                        </div>
                    </a>
                </div>

            </div>
            <div class="row mt-3">
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                Kartu NUPTK
                            </span>
                        </div>
                    </a>
                </div>
                <div class="col-lg-6">
                    <a href="" class="text-decoration-none">
                        <div class="border border-warning text-decoration-none text-center rounded shadow-sm py-5 px-4"
                            style="height: 200px">
                            <img src="/assets/dashboard/img/documents.png" alt="" width="50" class="img-fluid">
                            <br>
                            <span class="small text-uppercase">
                                Sertifikasi Guru
                            </span>
                        </div>
                    </a>
                </div>

            </div>
        </div>

    </div>

    <div class="col-xl-7 col-sm-12 mb-5">
        <form method="POST" id="formBerkas" action="{{route('usulan-kenaikan-gaji.store')}}"
            enctype="multipart/form-data">
            @csrf
            <div class="border border-warning text-center rounded shadow-sm py-5 px-4"><img
                    src="/assets/dashboard/img/file-upload.png" alt="" width="100" class="img-fluid">
                <h5 class="mb-0">Upload Berkas Usulan Kenaikan Gaji</h5>
                <span class="small text-uppercase">
                    File harus berekstensi .PDF dengan ukuran maksimal 1 MB
                </span>
            </div>

            <div class="row gx-4 d-flex justify-content-center">
                <div class="col-lg-12 mt-3" id="listBerkas">
                </div>

                <div class="div">
                    <button type="button" class="btn btn-warning" id="btnTambahBerkas"> + Tambah Berkas</button>
                </div>


            </div> <!-- / .row -->

            <hr>
            <div class="div d-flex justify-content-center mt-5">
                <button type="submit" class="btn btn-primary">Upload Berkas</button>
            </div>
        </form>
    </div><!-- End -->

</div>

@endsection

{{-- Style Disini --}}
@push('style')
<style>
    .social-link {
        width: 30px;
        height: 30px;
        border: 1px solid #ddd;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        border-radius: 50%;
        transition: all 0.3s;
        font-size: 0.9rem;
    }

    .social-link:hover,
    .social-link:focus {
        background: #ddd;
        text-decoration: none;
        color: #555;
    }

</style>
@endpush

{{-- Script Disini --}}
@push('script')
<script>
    var lengthNamaBerkas = 0;
    var lengthTipeFileBerkas = 0;
    var lengthSizeFileBerkas = 0;
    var lengthFileBerkas = 0;
    var ukuranFile = 1048576;
    $('#formBerkas').submit(function (e) {
        lengthNamaBerkas = 0;
        lengthTipeFileBerkas = 0;
        lengthSizeFileBerkas = 0;
        lengthFileBerkas = 0;
        $(".namaBerkas").each(function () {
            if ($(this).val()) {
                lengthNamaBerkas++;
            }
        })

        if (!$(".fileBerkas")[0]) {
            swal("Terjadi Kesalahan", "Berkas Harus Ditambahkan", {
                icon: "error",
                buttons: {
                    confirm: {
                        className: 'btn btn-danger'
                    }
                },
            });
            e.preventDefault();
        } else {
            $(".fileBerkas").each(function () {
                if (this.files[0]) {
                    var fileBerkas = this.files[0];
                    var fileSize = fileBerkas.size;
                    var fileType = fileBerkas["type"];
                    var validImageTypes = ["application/pdf"];

                    if (fileType == validImageTypes) {
                        lengthTipeFileBerkas++;
                    }

                    if (fileSize < ukuranFile) {
                        lengthSizeFileBerkas++;
                    }

                    lengthFileBerkas++;
                }
            })
        }

        if (lengthNamaBerkas !== $('.namaBerkas').length) {
            swal("Periksa Kembali Berkas Anda", "Nama Berkas Tidak Boleh Kosong", {
                icon: "error",
                buttons: {
                    confirm: {
                        className: 'btn btn-danger'
                    }
                },
            });
            e.preventDefault();
        }

        if (lengthFileBerkas !== $('.fileBerkas').length) {
            swal("Periksa Kembali Berkas Anda", "Berkas Tidak Boleh Kosong", {
                icon: "error",
                buttons: {
                    confirm: {
                        className: 'btn btn-danger'
                    }
                },
            });
            e.preventDefault();
        }

        if (lengthSizeFileBerkas !== $('.fileBerkas').length) {
            swal("Periksa Kembali Berkas Anda", "Berkas Harus Berukuran Kurang dari 1 MB", {
                icon: "error",
                buttons: {
                    confirm: {
                        className: 'btn btn-danger'
                    }
                },
            });
            e.preventDefault();
        }

        if (lengthTipeFileBerkas !== $('.fileBerkas').length) {
            swal("Periksa Kembali Berkas Anda", "Berkas Yang Diupload Harus PDF", {
                icon: "error",
                buttons: {
                    confirm: {
                        className: 'btn btn-danger'
                    }
                },
            });
            e.preventDefault();
        }
    })

</script>


<script>
    $(document).ready(function () {
        $('.nav-usulan-kenaikan-gaji').addClass('active');
    })

</script>

<script>
    var i = 1;
    $('#btnTambahBerkas').on('click', function () {
        i++;
        var formBerkas =
            ' <div class="form-group border border-success rounded p-3" id="daftarBerkas' + i +
            '"><label for="exampleInputEmail1">Nama Berkas</label><input type="text" class="form-control namaBerkas" id="exampleInputEmail1" aria-describedby="emailHelp"placeholder="Nama Berkas" name="namaBerkas[]"><div class="mb-3 mt-3"><label for="formFileSm" class="form-label">File Berkas</label><input class="form-control form-control-sm fileBerkas" id="formFileSm" type="file" name="fileBerkas[]"></div><div class="div d-flex justify-content-end"><button href="" class="btn btn-danger btn-sm btnHapusFitur" id="' +
            i +
            '"><i class="fas fa-trash-alt"></i> Hapus</button></div></div>';
        $('#listBerkas').append(formBerkas);
    })

    $(document).on('click', '.btnHapusFitur', function () {
        var id = $(this).attr("id");
        $('#daftarBerkas' + id).remove();
        i--;
    })

</script>
@endpush
